<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Форма в JSON</title>
</head>
<body>
    <form id="myForm">
        <label for="name">Имя:</label>
        <input type="text" id="name" name="name" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <button type="submit">Отправить</button>
    </form>

    <script>
        document.getElementById('myForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Предотвращаем стандартное поведение формы

            // Собираем данные формы
            const formData = new FormData(this);
            const jsonData = {};

            formData.forEach((value, key) => {
                jsonData[key] = value; // Преобразуем FormData в объект
            });

            // Преобразуем объект в JSON
            const jsonString = JSON.stringify(jsonData);

            // Отправляем данные на API
            sendDataToAPI(jsonString);
        });

        function sendDataToAPI(data) {
            fetch('https://api.example.com/endpoint', {
                method: 'POST', // Метод запроса
                headers: {
                    'Content-Type': 'application/json' // Указываем, что отправляем JSON
                },
                body: data // Отправляем данные
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Сетевая ошибка');
                }
                return response.json(); // Обрабатываем ответ
            })
            .then(data => {
                console.log('Успех:', data); // Обработка успешного ответа
            })
            .catch(error => {
                console.error('Ошибка:', error); // Обработка ошибок
            });
        }
    </script>
</body>
</html>
